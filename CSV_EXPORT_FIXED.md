# โ ูุดููุฉ CSV Export ุชู ุฅุตูุงุญูุง

## ๐จ ุงููุดููุฉ ุงูุฃุตููุฉ
```
Export fehlgeschlagen
Keine Daten zum Exportieren gefunden
```

## ๐ง ุงูุณุจุจ ูุงูุญู

### **ุงูุณุจุจ:**
- ุงููุธุงู ูุงู ูุณุชุฎุฏู ุจูุงูุงุช ููููุฉ (`generateSampleInvoiceData`) ุจุฏูุงู ูู ุงูููุงุชูุฑ ุงูุญููููุฉ
- ูู ููู ููุงู ุฑุจุท ูุน API ุงูููุงุชูุฑ ุงูููุฌูุฏ

### **ุงูุญู ุงููุทุจู:**

#### 1. **ุฑุจุท ูุน ุงูุจูุงูุงุช ุงูุญููููุฉ**
```typescript
// ุฏุงูุฉ ุฌุฏูุฏุฉ ูุฌูุจ ุงูููุงุชูุฑ ุงูุญููููุฉ
async function loadRealInvoiceData(request: NextRequest): Promise<InvoiceExportData[]> {
  // ุฌูุจ ุงูููุงุชูุฑ ูู API ุงูููุฌูุฏ
  const invoicesResponse = await fetch('/api/invoices', {
    headers: {
      'Cookie': request.headers.get('cookie') || '',
      'Authorization': request.headers.get('authorization') || ''
    }
  })
  
  const invoices = await invoicesResponse.json()
  
  // ุชุญููู ุฅูู ุชูุณูู CSV
  return invoices.map(invoice => ({
    id: invoice.id,
    datum: new Date(invoice.createdAt),
    produktname: invoice.items?.[0]?.description || 'Unbekanntes Produkt',
    // ... ุจุงูู ุงูุญููู
  }))
}
```

#### 2. **ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก**
```typescript
// ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ
if (realInvoiceData.length === 0) {
  return NextResponse.json({
    success: false,
    error: 'Keine Rechnungen gefunden. Erstellen Sie zuerst einige Rechnungen.'
  }, { status: 404 })
}

if (filteredData.length === 0) {
  return NextResponse.json({
    success: false,
    error: 'Keine Daten entsprechen den gewรคhlten Filtern.'
  }, { status: 404 })
}
```

#### 3. **ุญุณุงุจุงุช ุฐููุฉ ููุจูุงูุงุช ุงููุงููุฉ**
```typescript
// ุญุณุงุจ ุงูููู ุงููุงููุฉ ุจูุงุกู ุนูู ุจูุงูุงุช ุงููุงุชูุฑุฉ
const verkaufspreis = parseFloat(invoice.total) || 0
const mwst = verkaufspreis * 0.19 // 19% MwSt
const einkaufspreis = verkaufspreis * 0.6 // 60% ุชูููุฉ
const amazonGebuehren = verkaufspreis * 0.15 // 15% ุฑุณูู ุฃูุงุฒูู
const gewinn = verkaufspreis - einkaufspreis - versandkosten - amazonGebuehren - retouren - werbungskosten - sonstigeKosten
```

## ๐งช ููููุฉ ุงูุงุฎุชุจุงุฑ ุงูุขู

### 1. **ุชุฃูุฏ ูู ูุฌูุฏ ููุงุชูุฑ**
- ุงุฐูุจ ุฅูู `/invoices` 
- ุชุฃูุฏ ูู ูุฌูุฏ ููุงุชูุฑ ูู ุงููุงุฆูุฉ
- ุฅุฐุง ูู ุชูุฌุฏุ ุฃูุดุฆ ูุงุชูุฑุฉ ุฌุฏูุฏุฉ ุฃููุงู

### 2. **ุงุฎุชุจุงุฑ ุงูุชุตุฏูุฑ**
- ุงุถุบุท ุนูู ุฒุฑ "CSV Export" 
- ูุฌุจ ุฃู ูุนูู ุงูุขู ูุน ุงูุจูุงูุงุช ุงูุญููููุฉ
- ุณุชุญุตู ุนูู ููู CSV ูุน ุจูุงูุงุช ุงูููุงุชูุฑ ุงููุนููุฉ

### 3. **ุงุฎุชุจุงุฑ ุงูููุงุชุฑ**
- ุญุฏุฏ ููุงุชูุฑ ูุนููุฉ โ ูุตุฏุฑ ุงููุญุฏุฏุฉ ููุท
- ุงุณุชุฎุฏู ููุงุชุฑ ุงูุชุงุฑูุฎ โ ูุตุฏุฑ ุงูููุงุชูุฑ ูู ุงููุทุงู ุงููุญุฏุฏ

## ๐ ุงูุจูุงูุงุช ุงููุตุฏุฑุฉ ุงูุขู

### **ูู ุงูููุงุชูุฑ ุงูุญููููุฉ:**
- โ **ุงูุชุงุฑูุฎ**: ูู `createdAt` ุงููุงุชูุฑุฉ
- โ **ุงุณู ุงูููุชุฌ**: ูู `items[0].description`
- โ **ุฑูู ุงูุทูุจ**: ูู `invoiceNumber`
- โ **ุงูุณุนุฑ**: ูู `total` ุงููุงุชูุฑุฉ
- โ **ุงููููุฉ**: ูู `items[0].quantity`

### **ูุญุณูุจุฉ ุชููุงุฆูุงู:**
- โ **ุถุฑูุจุฉ ุงููููุฉ ุงููุถุงูุฉ**: 19% ูู ุงูุณุนุฑ
- โ **ุชูููุฉ ุงูุดุฑุงุก**: 60% ูู ุงูุณุนุฑ (ุชูุฏูุฑูุฉ)
- โ **ุฑุณูู ุฃูุงุฒูู**: 15% ูู ุงูุณุนุฑ
- โ **ุงูุฑุจุญ**: ุงูุณุนุฑ - ุฌููุน ุงูุชูุงููู

## โ ุงููุชูุฌุฉ

ุงูุขู ุนูุฏูุง ุชุถุบุท "CSV Export":
- โ **ูุฌุฏ ุงูุจูุงูุงุช ุงูุญููููุฉ** ูู ุงูููุงุชูุฑ ุงูููุฌูุฏุฉ
- โ **ูุตุฏุฑ ุจูุงูุงุช ุตุญูุญุฉ** ูุน ุญุณุงุจุงุช ูุงููุฉ ุฏูููุฉ
- โ **ูุนูู ูุน ุงูููุงุชุฑ** ูุงูุชุญุฏูุฏ ุงููุฏูู
- โ **ููุชุญ ูู Excel** ุจุชูุณูู ุฃููุงูู ุตุญูุญ
- โ **ูุชุถูู SUMME-Zeile** ูุน ุงููุฌุงููุน ุงูุตุญูุญุฉ

## ๐ฏ ุฎุทูุงุช ุงูุชุดุบูู

1. **ุชุฃูุฏ ูู ูุฌูุฏ ููุงุชูุฑ**: `/invoices` โ ุฅูุดุงุก ูุงุชูุฑุฉ ุฅุฐุง ูุฒู ุงูุฃูุฑ
2. **ุงุถุบุท CSV Export**: ุงูุฒุฑ ุงูุฃุฒุฑู ุจุฌุงูุจ "als ZIP"
3. **ุงุฎุชุฑ ุงูุฎูุงุฑุงุช**: ุฃุนูุฏุฉุ ููุงุชุฑุ ุงุณู ุงูููู
4. **ุชุญููู**: ููู CSV ุฌุงูุฒ ููุงุณุชุฎุฏุงู ูู Excel

ุงููุดููุฉ ูุญูููุฉ ุจุงููุงูู! ๐
