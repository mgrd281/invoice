# ๐ฏ ุฏููู ุฎุทูุงุช ููุตู - ุฅุตูุงุญ ุชูุงูู Shopify

## ๐ **ุงููุดููุฉ ุงูุญุงููุฉ:**
- ุงูุนููู: "Unbekannt" 
- ุงูุนููุงู: "Keine Adresse"
- ุงูุฅูููู: "Keine E-Mail"

## ๐ **ุงูุญู ุงูุดุงูู - 5 ูุฑุงุญู**

---

## **ุงููุฑุญูุฉ 1: ุฅูุดุงุก Shopify Private App ุฌุฏูุฏ** ๐ง

### **ุงูุฎุทูุฉ 1.1: ุงููุตูู ุฅูู Shopify Admin**
1. **ุงูุชุญ ูุชุตูุญู** ูุงุฐูุจ ุฅูู: `https://45dv93-bk.myshopify.com/admin`
2. **ุณุฌู ุฏุฎููู** ุจุญุณุงุจ ุงููุฏูุฑ
3. ูู ุงูุดุฑูุท ุงูุฌุงูุจูุ ุงููุฑ ุนูู **"Settings"** (ุงูุฅุนุฏุงุฏุงุช)

### **ุงูุฎุทูุฉ 1.2: ุงููุตูู ุฅูู Apps**
1. ูู ุตูุญุฉ Settingsุ ุงููุฑ ุนูู **"Apps and sales channels"**
2. ูู ุงูุฃุนููุ ุงููุฑ ุนูู **"Develop apps"** ุฃู **"Apps entwickeln"**
3. ุฅุฐุง ูู ุชุฌุฏ ูุฐุง ุงูุฎูุงุฑุ ุงุจุญุซ ุนู **"Private apps"**

### **ุงูุฎุทูุฉ 1.3: ุญุฐู ุงูุชุทุจููุงุช ุงููุฏููุฉ**
1. **ููู ุฌุฏุงู:** ุงุญุฐู ุฌููุน Private Apps ุงูููุฌูุฏุฉ
2. ููู ุชุทุจูู ูุฏูู:
   - ุงููุฑ ุนูู ุงุณู ุงูุชุทุจูู
   - ุงููุฑ **"Delete app"** ุฃู **"App lรถschen"**
   - ุฃูุฏ ุงูุญุฐู

### **ุงูุฎุทูุฉ 1.4: ุฅูุดุงุก ุชุทุจูู ุฌุฏูุฏ**
1. ุงููุฑ **"Create an app"** ุฃู **"App erstellen"**
2. **App name**: `Invoice System Full Access`
3. **App URL**: ุงุชุฑูู ูุงุฑุบุงู ุฃู ุถุน `https://localhost`
4. ุงููุฑ **"Create app"**

### **ุงูุฎุทูุฉ 1.5: ุถุจุท ุงูุตูุงุญูุงุช (KRITISCH!)**

**ูู ูุณู "Admin API access scopes":**

โ **ูุฌุจ ุชูุนูู ูุฐู ุงูุตูุงุญูุงุช ุชูุงูุงู:**

| **Scope** | **ุงููุตู** | **ุญุงูุฉ** |
|-----------|------------|----------|
| `read_orders` | ูุฑุงุกุฉ ุงูุทูุจุงุช | โ **ูุทููุจ** |
| `read_customers` | ูุฑุงุกุฉ ุจูุงูุงุช ุงูุนููุงุก | โ **ูุทููุจ** |
| `read_products` | ูุฑุงุกุฉ ุงูููุชุฌุงุช | โ **ูุทููุจ** |
| `read_inventory` | ูุฑุงุกุฉ ุงููุฎุฒูู | โ **ุงุฎุชูุงุฑู** |
| `read_fulfillments` | ูุฑุงุกุฉ ุญุงูุฉ ุงูุดุญู | โ **ุงุฎุชูุงุฑู** |

**โ๏ธ ุชุฃูุฏ ูู ุชูุนูู `read_orders` ู `read_customers` - ููุง ุงูุฃูู!**

### **ุงูุฎุทูุฉ 1.6: ุชุซุจูุช ุงูุชุทุจูู ูุงูุญุตูู ุนูู Token**
1. ุงููุฑ **"Save"** ุฃู **"Speichern"**
2. ุงููุฑ **"Install app"** ุฃู **"App installieren"**
3. ูู ุตูุญุฉ **"API credentials"**:
   - ุงูุณุฎ **"Admin API access token"** (ูุจุฏุฃ ุจู `shpat_`)
   - **โ๏ธ ุงุญูุธู ููุฑุงู - ูู ูุธูุฑ ูุฑุฉ ุฃุฎุฑู!**

---

## **ุงููุฑุญูุฉ 2: ุฅููุงู ุฅุฎูุงุก ุงูุจูุงูุงุช (PII Masking)** ๐

### **ุงูุฎุทูุฉ 2.1: ุฅุนุฏุงุฏุงุช ุงูุฎุตูุตูุฉ**
1. **Shopify Admin** โ **Settings** โ **Privacy and compliance**
2. ุงุจุญุซ ุนู ูุณู **"Customer data requests"**
3. ุชุฃูุฏ ูู:
   - **"Automatically fulfill customer data requests"** = **OFF** โ
   - **"Automatically fulfill customer erasure requests"** = **OFF** โ

### **ุงูุฎุทูุฉ 2.2: ุฅุนุฏุงุฏุงุช ุงููุชุฌุฑ ุงูุนุงูุฉ**
1. **Settings** โ **General**
2. ูู ูุณู **"Store status"**:
   - **"Password protection"** = **OFF** โ (ุฅููุงู ุญูุงูุฉ ูููุฉ ุงููุฑูุฑ)
   - **"Store status"** = **"Online store is live"** โ

### **ุงูุฎุทูุฉ 2.3: ุฅุนุฏุงุฏุงุช Checkout**
1. **Settings** โ **Checkout**
2. ูู ูุณู **"Customer information"**:
   - ุงุฎุชุฑ **"Don't require an account"** ุฃู **"Accounts are optional"**
3. ูู ูุณู **"Customer contact"**:
   - ุงุฎุชุฑ **"Customers can checkout using their email address"**

---

## **ุงููุฑุญูุฉ 3: ุชุญุฏูุซ ุงููุธุงู ุจุงูู Token ุงูุฌุฏูุฏ** โ๏ธ

### **ุงูุฎุทูุฉ 3.1: ุงุฎุชุจุงุฑ Token ุงูุฌุฏูุฏ**
1. **ุงูุชุญ Terminal** ูู ูุฌูุฏ ุงููุดุฑูุน
2. ุดุบู ุงูุฃูุฑ:
```bash
node update-shopify-credentials.js
```
3. **ุฃุฏุฎู Token ุงูุฌุฏูุฏ** ุนูุฏูุง ููุทูุจ ููู
4. **ุชุฃูุฏ ูู ูุฌุงุญ ุงูุงุฎุชุจุงุฑ** - ูุฌุจ ุฃู ุชุฑู:
   - โ Token test successful!
   - โ Customer data access: GRANTED
   - โ Order data access: GRANTED

### **ุงูุฎุทูุฉ 3.2: ุชุญุฏูุซ ุฅุนุฏุงุฏุงุช ุงููุธุงู**
ุฅุฐุง ูุฌุญ ุงูุงุฎุชุจุงุฑุ ูุฌุจ ุชุญุฏูุซ Token ูู ุงููุธุงู:

**ุงูุทุฑููุฉ 1: ุชุญุฏูุซ ุงูููู ูุจุงุดุฑุฉ**
1. ุงูุชุญ ููู `/lib/shopify-settings.ts`
2. ุบูุฑ `accessToken` ุฅูู Token ุงูุฌุฏูุฏ
3. ุงุญูุธ ุงูููู

**ุงูุทุฑููุฉ 2: ุงุณุชุฎุฏุงู Environment Variables**
1. ุฃูุดุฆ ููู `.env.local` ูู ุฌุฐุฑ ุงููุดุฑูุน
2. ุฃุถู:
```bash
SHOPIFY_ACCESS_TOKEN=shpat_YOUR_NEW_TOKEN_HERE
```

### **ุงูุฎุทูุฉ 3.3: ุฅุนุงุฏุฉ ุชุดุบูู ุงููุธุงู**
```bash
# ุฃููู ุงููุธุงู (Ctrl+C)
# ุซู ุดุบูู ูุฑุฉ ุฃุฎุฑู
npm run dev
```

---

## **ุงููุฑุญูุฉ 4: ุงุฎุชุจุงุฑ ุงุณุชูุฑุงุฏ ุทูุจ ูุงุญุฏ** ๐งช

### **ุงูุฎุทูุฉ 4.1: ุชุดุบูู ุงุฎุชุจุงุฑ ุดุงูู**
```bash
node test-single-order-import.js
```

**ูุง ูุฌุจ ุฃู ุชุฑุงู:**
- โ Orders fetched successfully
- โ Order conversion working
- โ Invoice creation successful
- โ Address priority: Shipping โ Billing โ Default

### **ุงูุฎุทูุฉ 4.2: ูุญุต ุงููุชุงุฆุฌ**
ุฅุฐุง ุฑุฃูุช:
- **๐ SUCCESS: All customer data is REAL and COMPLETE!**
  - ุชูุงูููุง! ุงููุดููุฉ ูุญูููุฉ
- **โ๏ธ PARTIAL SUCCESS: Some real data is visible**
  - ุฌูุฏุ ุงูุชุธุฑ 24-48 ุณุงุนุฉ
- **โ STILL MASKED: All data is using fallbacks**
  - ุชุงุจุน ูููุฑุญูุฉ ุงูุชุงููุฉ

---

## **ุงููุฑุญูุฉ 5: ุงุฎุชุจุงุฑ ูู ุงููุงุฌูุฉ** ๐ฅ๏ธ

### **ุงูุฎุทูุฉ 5.1: ุงููุตูู ุฅูู Shopify Integration**
1. **ุงูุชุญ ุงููุชุตูุญ** ูุงุฐูุจ ุฅูู: `http://localhost:3000/shopify`
2. ุงููุฑ ุนูู ุชุจููุจ **"Legacy System"**

### **ุงูุฎุทูุฉ 5.2: ุชุญููู ุงูุทูุจุงุช**
1. ูู ูุณู **"Von Datum"**: ุถุน `2024-06-06`
2. ูู ูุณู **"Bis Datum"**: ุถุน `2025-12-31`
3. ูู ูุณู **"Zahlungsstatus"**: ุงุฎุชุฑ **"Alle Status"**
4. ุงููุฑ **"Laden"**

### **ุงูุฎุทูุฉ 5.3: ูุญุต ุงูุจูุงูุงุช**
ูุฌุจ ุฃู ุชุฑู ุงูุขู:
- **โ Kunde**: ุงุณู ุญูููู (ุจุฏูุงู ูู "Unbekannt")
- **โ E-Mail**: ุฅูููู ุญูููู (ุจุฏูุงู ูู "Keine E-Mail")
- **โ Adresse**: ุนููุงู ุญูููู (ุจุฏูุงู ูู "Keine Adresse")

### **ุงูุฎุทูุฉ 5.4: ุงุฎุชุจุงุฑ ุชุญููู ุฅูู ูุงุชูุฑุฉ**
1. **ุงุฎุชุฑ ุทูุจ ูุงุญุฏ** ุจูุถุน ุนูุงูุฉ โ
2. ุงููุฑ **"Als Rechnungen erstellen"**
3. ุงูุชุธุฑ ุฑุณุงูุฉ ุงููุฌุงุญ
4. ุงููุฑ ุนูู ุฃููููุฉ **๐** ูุชุญููู PDF

---

## **๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก**

### **ูุดููุฉ 1: "Token ุบูุฑ ุตุงูุญ"**
```
โ Error: 401 Unauthorized
```
**ุงูุญู:**
- ุชุฃูุฏ ูู ูุณุฎ Token ูุงููุงู
- ุชุฃูุฏ ูู ุชุซุจูุช Private App
- ุฃุนุฏ ุฅูุดุงุก Token ุฌุฏูุฏ

### **ูุดููุฉ 2: "ุตูุงุญูุงุช ุบูุฑ ูุงููุฉ"**
```
โ Error: 403 Forbidden
```
**ุงูุญู:**
- ุชุฃูุฏ ูู ุชูุนูู `read_orders` ู `read_customers`
- ุงุญุฐู ุงูุชุทุจูู ูุฃุนุฏ ุฅูุดุงุกู
- ุงูุชุธุฑ 24 ุณุงุนุฉ

### **ูุดููุฉ 3: "ุงูุจูุงูุงุช ูุง ุชุฒุงู ูุฎููุฉ"**
```
โ Customer: "Unbekannt"
```
**ุงูุญู:**
- ุชุฃูุฏ ูู ุฅููุงู Password protection
- ุชุฃูุฏ ูู ุฅุนุฏุงุฏุงุช Privacy compliance
- ุงูุชุธุฑ 48 ุณุงุนุฉ ูุงูุชุดุงุฑ ุงูุชุบููุฑุงุช

### **ูุดููุฉ 4: "ูุง ุชูุฌุฏ ุนูุงููู"**
```
โ Address: "Keine Adresse"
```
**ูุฐุง ุทุจูุนู ุฅุฐุง:**
- ุงูุนููุงุก ูู ูุฏุฎููุง ุนูุงููู
- ุงูููุชุฌุงุช ุฑูููุฉ (ูุง ุชุญุชุงุฌ ุดุญู)
- ุณูุชู ุงุณุชุฎุฏุงู ุนูุงููู ุงูุชุฑุงุถูุฉ ููููุฉ

---

## **โ ุนูุงูุงุช ุงููุฌุงุญ**

### **ุจุนุฏ ุชุทุจูู ุงูุญูุ ูุฌุจ ุฃู ุชุฑู:**

**ูู ุงููุงุฌูุฉ:**
```
โ Kunde: "Max Mustermann"
โ E-Mail: "max@example.com"  
โ Adresse: "Musterstraรe 123, 12345 Berlin"
```

**ูู ุงููุงุชูุฑุฉ PDF:**
- ุงุณู ุงูุนููู ุงูุญูููู
- ุนููุงู ูุงูู ูููุณู
- ุฅูููู ุตุญูุญ
- ุฌููุน ุชูุงุตูู ุงูุทูุจ

---

## **๐ ุงูุฏุนู ุงูุฅุถุงูู**

### **ุฅุฐุง ูู ุชูุฌุญ ุงูุญููู:**

1. **ุชูุงุตู ูุน Shopify Support**
   - ุงุทูุจ ุฅููุงู PII Masking ูุฏููุงู
   - ุงุฐูุฑ ุฃูู ุชุญุชุงุฌ ุงูุจูุงูุงุช ูุฅูุดุงุก ููุงุชูุฑ

2. **ุชุญูู ูู ุฎุทุฉ ุงููุชุฌุฑ**
   - ุจุนุถ ุงูููุฒุงุช ุชุญุชุงุฌ ุฎุทุท ุฃุนูู
   - Basic Plan ูุฏ ูููู ูู ูููุฏ

3. **ุฅุนุฏุงุฏุงุช GDPR ุงูุฅูููููุฉ**
   - ุงููุชุงุฌุฑ ุงูุฃูุฑูุจูุฉ ููุง ููุงููู ุฃุตุฑู
   - ูุฏ ุชุญุชุงุฌ ููุงููุฉ ุฎุงุตุฉ

---

## **โฐ ุงูุฌุฏูู ุงูุฒููู ุงููุชููุน**

- **ููุฑู**: ุฅูุดุงุก Private App ูุชุญุฏูุซ Token
- **30 ุฏูููุฉ**: ุชุทุจูู ุฅุนุฏุงุฏุงุช ุงูุฎุตูุตูุฉ
- **2-4 ุณุงุนุงุช**: ุธููุฑ ุจุนุถ ุงูุจูุงูุงุช
- **24-48 ุณุงุนุฉ**: ุธููุฑ ุฌููุน ุงูุจูุงูุงุช ูุงููุฉ

**ุงููุธุงู ุฌุงูุฒ ุชูููุงู - ููุชุธุฑ ููุท ุงูุจูุงูุงุช ุงูุญููููุฉ ูู Shopify!** ๐
